<div class="container">

  <div id="carouselExample" class="carousel slide box">
    <div class="carousel-inner">
      <% @hotspots.each_with_index do |hotspot, index| %>
        <% if index == 0 %>
          <div class="carousel-item active">
            <%= image_tag hotspot.photo, class:"d-block w-100" %>
          </div>
        <% else %>
          <div class="carousel-item">
            <%= image_tag hotspot.photo, class:"d-block w-100" %>
          </div>
        <% end %>
      <% end %>
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>

    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <div class="row simple-form" data-controller="geolocate">
    <%= simple_form_for @request do |f| %>
      <%= f.input :distance%>

      <%= f.input :category,
                multiple: true,
                as: :check_boxes,
                collection_wrapper_tag: "div",
                collection_wrapper_class: "category-wrapper",
                item_wrapper_class: "category-item",
                input_html: {class: "category-selector", :multiple => true},
                collection: Request::CATEGORIES %>

      <%= f.input :longitude,
                as: :hidden,
                input_html: {data: {geolocate_target: "longitude"}, class: "input-longitude"}
      %>


      <%= f.input  :latitude,
                as: :hidden,
                input_html: {data: {geolocate_target: "latitude"}, class: "input-latitude"}
      %>

  </div><br>

  <div style="width: 100%; height: 600px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

      <%= f.button :submit, "LOAD", class: "big_blue_button"%>
    <% end %>
  </div><br>

</div>
